(function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-12"},[a("p",{staticClass:"display-4 justify-center d-none d-sm-flex"},[e._v("Teostokeikat")]),a("p",{staticClass:"display-2 justify-center d-flex d-sm-none"},[e._v("Teostokeikat")]),a("p",{staticClass:"font-weight-light font-italic text-center"},[e._v("Kaikki vuoden 2014-2017 Teostolle ilmoitetut keikat")])])],1),a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"644"}},[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[a("v-card-text",[a("v-text-field",{attrs:{placeholder:"Syötä kaupunki"},model:{value:e.place,callback:function(t){e.place=t},expression:"place"}}),a("v-select",{attrs:{items:e.years,label:"Vuosi"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}}),a("v-btn",{attrs:{type:"submit",disabled:null==e.place||"loading"==e.ready,large:"",color:"primary"},on:{click:function(t){e.curPage=1,e.search(e.curPage)}}},[e._v("Etsi")])],1)],1)],1),a("v-row",[a("v-col",{staticClass:"col-12"},[a("div",{staticClass:"text-center"},[0!=e.pages?a("v-pagination",{attrs:{disabled:"loading"==e.ready,length:e.pages},on:{change:function(t){return e.changePage(t)}},model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}}):e._e()],1)])],1)],1)],1),a("v-row",[a("v-col",{staticClass:"col-12"},[a("div",{staticClass:"text-center"},["404"==e.error?a("p",[e._v("Antamillasi hakuehdoilla ei löytynyt mitään!")]):e._e(),"loading"==e.ready?a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}}):e._e()],1),1==e.ready?a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Tapahtuman nimi")]),a("th",{staticClass:"text-left"},[e._v("Paikka")]),a("th",{staticClass:"text-left"},[e._v("Päivämäärä")])])]),a("tbody",e._l(e.eventDetails,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(t.venue.name))]),a("td",[e._v(e._s(t.startDate))])])})),0)]},proxy:!0}],null,!1,2246702162)}):e._e()],1)],1)],1)],1),a("v-footer",{attrs:{color:"grey lighten-5"}},[a("div",[e._v(" Data from "),a("a",{attrs:{href:"http://api.teosto.fi/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Teosto API")])]),a("v-spacer"),a("div",[e._v("Janne Karppinen © "+e._s((new Date).getFullYear()))])],1)],1)},o=[],i=(a("4160"),a("0d03"),a("b0c0"),a("d3b7"),a("e25e"),a("ac1f"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("bc3a")),s=a.n(i),l={mounted:function(){},name:"App",components:{},data:function(){return{curPage:1,pages:0,limit:15,ready:!1,place:null,events:[],eventDetails:[],showDetails:[],year:"2014",years:["2014","2015","2016","2017"],error:null}},computed:{},watch:{place:function(e){e||(this.place=null),e&&(this.error=null)},curPage:function(e){this.search(e),console.log("Page Changed to: "+e)}},methods:{changePage:function(e){"button"==e.target.type&&(this.curPage=parseInt(e.target.innerHTML))},search:function(e){var t=this;this.ready="loading",this.events=[],this.eventDetails=[],s.a.get("http://api.teosto.fi/"+this.year+"/municipality?name="+this.place+"&method=events&limit="+this.limit+"&page="+e).then((function(e){return t.curPage=e.data.response_meta.page,t.pages=e.data.response_meta.pages,t.events=e.data.events,console.log("Fetching..."),t.getEventDetails()})).then((function(e){console.log("READY"),e.forEach((function(e){"<n/a>"==e.data.event.name&&(e.data.event.name="NIMETÖN");var a=new Date(e.data.event.startDate),n=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear();e.data.event.startDate=n,t.eventDetails.push(e.data.event)})),setTimeout((function(){t.ready=!0}),1e3)})).catch((function(e){if(e.response){var a=e.response.status;e.response.data;console.log("Error: "+a),"404"==a&&(t.ready=!1,t.place=null),t.error=a}else;}))},getEventDetails:function(){var e=[];return this.events.forEach((function(t){e.push(s.a.get(t.url))})),Promise.all(e)}}},c=l,u=a("2877"),p=a("6544"),d=a.n(p),f=a("7496"),v=a("8336"),g=a("b0af"),h=a("99d9"),m=a("62ad"),y=a("a523"),b=a("a75b"),_=a("553a"),x=a("4bd4"),P=a("891e"),k=a("490a"),w=a("0fd9"),C=a("b974"),V=a("1f4f"),D=a("2fa4"),T=a("8654"),j=Object(u["a"])(c,r,o,!1,null,null,null),O=j.exports;d()(j,{VApp:f["a"],VBtn:v["a"],VCard:g["a"],VCardText:h["a"],VCol:m["a"],VContainer:y["a"],VContent:b["a"],VFooter:_["a"],VForm:x["a"],VPagination:P["a"],VProgressCircular:k["a"],VRow:w["a"],VSelect:C["a"],VSimpleTable:V["a"],VSpacer:D["a"],VTextField:T["a"]});var S=a("f309");n["a"].use(S["a"]);var E=new S["a"]({icons:{iconfont:"mdi"}});n["a"].config.productionTip=!1,new n["a"]({vuetify:E,render:function(e){return e(O)}}).$mount("#app")}});
//# sourceMappingURL=app.52a7073e.js.map